# 2.1 카프카 관리를 위한 주키퍼

생성일: 2021년 3월 12일 오후 11:13

## 주키퍼

### 분산 애플리케이션을 위한 코디네이션 시스템

분산 애플리케이션 사용시, 해당 애플리케이션을 관리하기 위한 안정적인 코디네이션 애플리케이션이 필요함.

→ 카프카는 분산 애플리케이션의 한 종류로서 주키퍼를 코디네이션 로직으로 이용

- 각 애플리케이션의 정보를 중앙에 집중
- 그룹관리 네이밍, 동기화

### 주키퍼 서비스

![2%201%20%E1%84%8F%E1%85%A1%E1%84%91%E1%85%B3%E1%84%8F%E1%85%A1%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%E1%84%85%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%B1%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%8C%E1%85%AE%E1%84%8F%E1%85%B5%E1%84%91%E1%85%A5%20a32995e7bf07422691c558664b7e688c/Untitled.png](2%201%20%E1%84%8F%E1%85%A1%E1%84%91%E1%85%B3%E1%84%8F%E1%85%A1%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5%E1%84%85%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%B1%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%8C%E1%85%AE%E1%84%8F%E1%85%B5%E1%84%91%E1%85%A5%20a32995e7bf07422691c558664b7e688c/Untitled.png)

- 서버 여러대를 클러스터로 구성
- 분산 애플리케이션들이 각각 클라이언트가 되어 주키퍼 서버들과 커넥션을 맺은 후 상태 정보를 주고받음
- 주키퍼에 저장되는 데이터는 모두 메모리에 저장됨 → 처리량이 매우 크고 속도 빠름
- 앙상블(클러스터) 라는 호스트 세트 구성 가능
    - 살아있는 노드 수가 과반수 이상 유지 → 지속적인 서비스 가능

### 주키퍼의 znode(지노드)

- 상태정보들을 키-밸류 형태로 저장해서 이를 분산 애플리케이션들이 서로 주고받음
- 데이터를 저장하기 위한 공간 이름 (= 파일, 폴더 디렉토리 개념)
- 자식노드를 가지고 있는 계층형 구조
- 지노드의 데이터가 변경될 때마다 지노드의 버전 번호가 증가

### 주키퍼가 카프카에서 하는 역할

1. 카프카의 컨트롤러 설정
2. 브로커 메타데이터 저장
3. 토픽 메타데이터 저장
4. 클라이언트 할당 정보 저장
5. 카프카 토픽 ACL (Access Control List) 저장